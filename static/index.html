<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Popush</title>
	<link href="css/bootstrap.min.css" rel="stylesheet" media="screen" />
	<link href="css/codemirror.css" rel="stylesheet" media="screen" />
	<link href="css/popush.css" rel="stylesheet" media="screen" />
	<script type="text/javascript" src="js/conf.js"></script>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.cookie.js"></script>
	<script type="text/javascript" src="js/socket.io.min.js"></script>
	<script type="text/javascript" src="js/firebase.js"></script>
	<script type="text/javascript" src="js/newMultiConnection.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/codemirror.js"></script>
	<script type="text/javascript" src="js/loadmode.js"></script>
	<script type="text/javascript" src="js/localization/zh-CN.js"></script>
	<script type="text/javascript" src="js/localization/en-US.js"></script>
	<script type="text/javascript" src="js/ie.js"></script>
<!--	<script type="text/javascript" src="js/filelist.js"></script>
	<script type="text/javascript" src="js/userlist.js"></script>
	<script type="text/javascript" src="js/expressionlist.js"></script>
	<script type="text/javascript" src="js/popush.js"></script>
	<script type="text/javascript" src="js/room.js"></script> -->
</head>
<body style="display:none;">
	<div class="hero-unit" id="big-one">
		<div class="container">
			<div class="row">
				<h1>Popush</h1>
				<p class="lead" localization>only-platform</p>
			</div>
		</div>
	</div>

	<div class="navbar navbar-fixed-top hide" id="nav-head">
		<div class="navbar-inner">
			<div class="container" style="width: auto; padding: 0 20px;">
				<a class="brand" href="#">Popush</a>
				<ul class="nav pull-right">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						<span id="nav-user-name">Your Name</span>
						<img height="32" width="32" src="#" id="nav-avatar" />
						</a>
						<ul class="dropdown-menu">
							<li><a href="#changepassword" data-toggle="modal" onclick="changepasswordopen()" localization>changepassword</a></li>
							<li><a href="#changeavatar" data-toggle="modal" onclick="changeavataropen()" localization>changeavatar</a></li>
							<li class="divider"></li>
							<li><a href="javascript:;" onclick="logout()" localization>logout</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
	
	<div class="container-fluid">
		<div class="container">
			<div class="row-fluid" id="login">
				<div class="span4 offset4">
					<h2 style="text-align:center" class="blink" localization>login</h2>
					<div class="alert hide" id="login-message">
						<button type="button" class="close" onclick="$('#login-message').slideUp()">&times;</button>
						<span>Nothing here</span>
					</div>
					<hr />
					<div id="login-box" class="form-horizontal" style="min-width:420px;position:relative;">
						<div class="control-group">
							<label class="control-label" for="login-inputName" localization>username</label>
							<div class="controls">
								<input type="text" id="login-inputName"/>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="login-inputPassword" localization>password</label>
							<div class="controls">
								<input type="password" id="login-inputPassword"/>
							</div>
						</div>
						<div class="control-group hide" id="login-padding">
							<label class="control-label">&nbsp;</label>
						</div>
						<div class="control-group">
							<p align="center" id="loading-init" style="margin:1px 0 2px 0"><img src="images/init.gif"/></p>
							<div class="controls" id="login-control">
								<button id="login-submit" type="submit" class="btn" localization>login</button>
								<a id="register-view" class="switch-rel" href="javascript:;" localization>register</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		
			<div class="row-fluid hide" id="register">
				<div class="span4 offset4">
					<h2 style="text-align:center" class="blink" localization>register</h2>
					<div class="alert hide" id="register-message">
						<button type="button" class="close" onclick="$('#register-message').slideUp()">&times;</button>
						<span>Nothing here</span>
					</div>
					<hr />
					<div id="register-box" class="form-horizontal" style="min-width:420px;position:relative;">
						<div class="control-group">
							<label class="control-label" for="register-inputName" localization>username</label>
							<div class="controls">
							  <a id="tooltip" href="#" data-toggle="tooltip" title="only-contain" localization>
								<input type="text" id="register-inputName"/>
							  </a>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="register-inputPassword" localization>password</label>
							<div class="controls">
								<input type="password" id="register-inputPassword"/>
							</div>
						</div>
						<div class="control-group hide" id="register-padding">
							<label class="control-label" for="register-inputPassword" localization>confirm</label>
							<div class="controls">
								<input type="password" id="register-confirmPassword"/>
							</div>
						</div>
						<div class="control-group">
							<div class="controls" id="register-control">
								<button id="register-submit" type="submit" class="btn" localization>register</button>
								<a id="login-view" class="switch-rel" href="javascript:;" localization>login</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="main-body">
			<div id="filecontrol" class="hide">
				<div class="row-fluid">
					<div class="span12">
						<ul class="nav nav-tabs">
							<li class="dropdown" id="ownedfile">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span localization>owningfiles</span><b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="#" data-toggle="modal" new-type="doc" localization>newfile</a></li>
									<li><a href="#" data-toggle="modal" new-type="dir" localization>newfolder</a></li>
									<!--<li class="divider"></li>
									<li><a href="javascript:;" localization>import</a></li>-->
								</ul>
							</li>
							<li id="ownedfileex" class="hide"><a href="#" class="file-go" localization>owningfiles</a></li>
							<li id="sharedfile"><a href="#" class="file-go" localization>sharedfiles</a></li>
						</ul>
					</div>
				</div>
				
				<div class="row-fluid" id="file-list">
					<div class="span10">
						<p><span localization>currentdir:</span>&nbsp;<span id="current-dir"></span></p>
						<table class="table table-hover" id="file-list-table">
              <tr class="head">
                <th class="col1">&nbsp;</th>
                <th class="col2" localization>filename</th>
                <th class="col3" localization>state</th>
                <th class="col4" localization>timestamp</th>
                <th class="col5">&nbsp;</th>
              </tr>
              <tr id="no-file"><td></td><td localization>nofile</td> <td></td> <td></td> <td></td></tr>
						</table>
					</div>
					<div class="span2">
						<span localization>shareduser</span>ï¼š
						<div id="member-list">
<!--							<img src="images/character.png" width="40" height="40" class="pull-left shared-character"/>-->
						</div>
					</div>
				</div>
			</div>
		
			<div id="editor" class="row-fluid hide">
				<div class="span9">
					<div class="tooltip top in" id="fullscreentip">
						<div class="tooltip-inner" localization>esctoexit</div>
					</div>
					<div id="editormain">
						<div id="editormain-inner">
							<div id="over-editor" class="btn-toolbar" style="margin:0 0 5px 0;">
								<div class="btn-group pull-right">
									<button class="btn" type="button" onclick="setFullScreen(editor, true)" title="maximum-title"><i class="icon-fullscreen"></i></button>
									<button class="btn" type="button" onclick="togglechat(this)" title="hide-title"><i class="icon-forward"></i></button>
								</div>
								<div class="btn-group pull-right" style="margin:0 15px 5px 0;">
									<button class="btn" type="button" id="editor-run" onclick="run()" title="run-title"><i class="icon-play"></i></button>
									<button class="btn" type="button" id="editor-debug" onclick="debug()" title="debug-title"><i class="icon-eye-open"></i></button>
									<button class="btn" type="button" id="editor-console" onclick="toggleconsole()" title="console"><i class="icon-share"></i></button>
								</div>
								<div class="btn-group pull-left" style="margin-left:0">
									<button class="btn" type="button" id="editor-back" onclick="closeeditor()"><i class="icon-home"></i></button>
								</div>
								<div class="btn-group" id="current-doc-outer">
									<p id="current-doc-p">
										<span id="current-doc">current doc</span>
										&nbsp;&nbsp;
										<span class="red" id="current-doc-state" localization>saving...</span>
									</p>
								</div>
								<div style="clear:both;"></div>
							</div>
							<textarea id="editor-textarea" ></textarea>
							<div id="under-editor" class="hide">
								<div id="console">
									<div id="console-title" class="well well-top" style="border-bottom:1px solid #ddd;padding:4px 0 5px 10px;" localization>console</div>
									<div id="console-inner">
									</div>
									<input id="console-input" type="text" style="border:none;border-radius:0;border-top:1px solid #ddd;" onkeydown="pressenter(arguments[0],stdin)"/>
								</div>
								<div id="varlist">
									<div class="well well-top">
										<div class="btn-group">
											<button class="btn disabled debugandwait" type="button" title="step-title" onclick="debugstep()">
												<i class="icon-arrow-down"></i>
											</button>
											<button class="btn disabled debugandwait" type="button" title="next-title" onclick="debugnext()">
												<i class="icon-arrow-right"></i>
											</button>
											<button class="btn disabled debugandwait" type="button" title="finish-title" onclick="debugfinish()">
												<i class="icon-share-alt"></i>
											</button>
											<button class="btn disabled debugandwait" type="button" title="continue-title" onclick="debugcontinue()">
												<i class="icon-play"></i>
											</button>
										</div>
									</div>
									<div id="varlistreal">
										<table class="table table-hover" id="varlist-table">
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="span3" id="chatbox">
					<div id="member-list-doc">
						<img src="images/character.png" width="40" height="40" class="pull-left shared-character" />
					</div>
					<div id="chat-show" style="height:284px;">
						<div id="chat-show-inner"></div>
					</div>
					<div class="input-append" style="margin-bottom:0">
						<input type="text" id="chat-input" onkeydown="pressenter(arguments[0],chat)">
						<button class="btn" type="button" onclick="chat()" title="send"><i class="icon-comment"></i></button>
						<button class="btn active" type="button" id="voice-on" onclick="voice()" title="voice"><i class="icon-volume-up"></i></button>
					</div>
				</div>
			</div>
		</div>
		<div id="footer" class="row-fluid">
			<div class="span11">			
				<button style="text-align:left" class="btn btn-link" type="button" onclick="app.changeLanguage()"><span  localization>changeLanguage</span></button>
			</div>

			<div class="span11">
				<p style="text-align:right" localization>popushteam</p>
				<p> &nbsp; </p>
			</div>
		</div>
		
		<!-- popover -->
		<div id="newfile" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="newfile-label" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 id="newfile-label" localization>newfile</h3>
			</div>
			<div class="modal-body form-horizontal">
				<div class="control-group">
					<label class="control-label" for="newfile-input" localization>name</label>
					<div class="controls">
						<input class="modal-input" type="text" id="newfile-input" />
						<span class="help-inline"></span>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="modal-buttons">
					<button class="btn btn-primary modal-confirm" localization>ok</button>
					<button class="btn" data-dismiss="modal" aria-hidden="true" localization>cancel</button>
				</div>
			</div>
		</div>

		
		<!-- popover -->
		<div id="changeavatar" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="changeavatarLabel" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 id="changeavatarLabel" localization>changeavatar</h3>
			</div>
			<div class="modal-body">
				<div class="alert hide" id="changeavatar-message">
					<button type="button" class="close" onclick="$('#changeavatar-message').slideUp()">&times;</button>
					<span>Nothing here</span>
				</div>
				<p localization>clicktochange</p>
				<p align="center">
					<img id="changeavatar-img" src="#" width="192" height="192" onclick="$('#changeavatar-input').click()" style="cursor:pointer;"/>
				</p>
				<div style="overflow:hidden;height:0;max-height:0;">
					<input type="file" name="upload" id="changeavatar-input" onchange="changeavatar(this)" accept="image/png,image/jpeg"/>
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true" localization>back</button>
			</div>
		</div>

		<!-- popover -->
		<div id="changepassword" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="changepasswordLabel" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 id="changepasswordLabel" localization>changepassword</h3>
			</div>
			<div class="modal-body form-horizontal">
				<div class="control-group">
					<label class="control-label" for="changepassword-old" localization>oldpassword</label>
					<div class="controls">
						<input type="password" id="changepassword-old" onkeydown="pressenter(arguments[0],changepassword)" />
						<span class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="changepassword-old" localization>newpassword</label>
					<div class="controls">
						<input type="password" id="changepassword-new" onkeydown="pressenter(arguments[0],changepassword)" />
						<span class="help-inline"></span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="changepassword-old" localization>confirm</label>
					<div class="controls">
						<input type="password" id="changepassword-confirm" onkeydown="pressenter(arguments[0],changepassword)" />
						<span class="help-inline"></span>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div id="changepassword-buttons">
					<button class="btn btn-primary modal-confirm" onclick="changepassword()" localization>ok</button>
					<button class="btn" data-dismiss="modal" aria-hidden="true" localization>cancel</button>
				</div>
			</div>
		</div>

    <!-- popover -->
		<div id="delete" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="delete-label" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 id="delete-label" localization>deleteconfirm</h3>
			</div>
			<div class="modal-body">
				<p><span localization>suretodelete</span>&nbsp;<span class="folder" localization>file</span> <span id="delete-name"></span></p>
			</div>
			<div class="modal-footer">
				<div class="modal-buttons">
					<button class="btn btn-danger modal-confirm" localization>ok</button>
					<button class="btn btn-primary" data-dismiss="modal" aria-hidden="true" localization>cancel</button>
				</div>
			</div>
		</div>

		<!-- popover -->
		<div id="rename" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="rename-label" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 id="rename-label" localization>rename</h3>
			</div>
			<div class="modal-body form-horizontal">
				<div class="control-group">
					<label class="control-label" for="rename-input" localization>newname</label>
					<div class="controls">
						<input class="modal-input" type="text" id="rename-input" />
						<span class="help-inline"></span>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="modal-buttons">
					<button class="btn btn-primary modal-confirm" localization>ok</button>
					<button class="btn" data-dismiss="modal" aria-hidden="true" localization>cancel</button>
				</div>
			</div>
		</div>

		<!-- popover -->
		<div id="share" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="shareLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
			<div class="modal-header">
				<button type="button" onclick="closeshare()" class="close">&times;</button>
				<h3 id="shareLabel" localization>sharemanage</h3>
			</div>
			<div class="modal-body">
				<p><span localization>file</span> <span id="share-name"></span> <span localization>sshareduser</span></p>
				<div id="share-user-box">
					<ul class="nav nav-pills nav-stacked" id="share-user-list">
					</ul>
				</div>
				<div class="alert hide" id="share-message">
					<button type="button" class="close" onclick="$('#share-message').slideUp()">&times;</button>
					<span>Nothing here</span>
				</div>
				<div class="form-inline" id="share-buttons">
					<span localization>newuser:</span>
					<input type="text" id="share-inputName" onkeydown="pressenter(arguments[0],share)" />
					<button class="btn" type="button" onclick="share()" localization>add</button>
					<button class="btn pull-right" type="button" onclick="unshare()" localization>delete</button>
				</div>
			</div>
			<div class="modal-footer">
				<div id="share-buttons">
					<button class="btn" onclick="closeshare()" localization>back</button>
				</div>
			</div>
		</div>

		<!-- popover -->
		<div id="messagedialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="messagedialogLabel" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3 id="messagedialogLabel">title</h3>
			</div>
			<div class="modal-body">
				<p id="messagedialogContent">info</p>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true" localization>ok</button>
			</div>
		</div>

	</div>
	<!--templates-->
	<script type="text/template" id="member-popover-template">
		<img class="pull-left popover-character user-<%= name %>" src="<%= avatar %>" witdh="48" height=48"/>
		<b><%= name %></b><br/>
		<span><div style="clear:both;"></div>
	</script>
	<script type="text/template" id="member-template">
		<img src="<%= avatar %>" width="40" height="40" class="member-avatar pull-left online shared-character user-<%= name %>" />
	</script>
  <script type="text/template" id="file-template">
<td class="col1"><img src="<%=model.pic%>" height="32" width="32" /></td>
<td class="col2"><a href="#index<%=encodeURI(model.shownPath)%>" class="file-go"><%=_.escape(model.shownName)%></a></td>
<% if (model.belongSelf) { %>
<td class="col3" localization><%=model.shared?strings["shared"]:""%></td>
<% } else { var o = model.owner; %>
<td class="col3 owner"><img class="user-other" src="<%=o.avatar%>" width="32" height="32"/><%=_.escape(o.name)%></td>
<% } %>
<td class="col4"><%=model.time%></td>
<td class="col5">
  <div class="dropdown">
    <a href="#" class="dropdown-toggle<%=model.belongSelf ? "" : " disabled"%> opreation" data-toggle="dropdown">&nbsp;</a>
  <ul class="dropdown-menu">
    <% if(model.inRoot) { %><li><a class="file-go-share" localization><%=strings["sharemanage"]%></a></li> <% } %>
    <li><a href="#" class="file-go-delete" localization><%=strings["delete"]%></a></li>
    <li><a href="#" class="file-go-rename" localization><%=strings["rename"]%></a></li>
  </ul>
  </div>
</td>
  </script>
	<script type="text/javascript" src="js/underscore.js"></script>
	<script type="text/javascript" src="js/backbone.js"></script>
	<script type="text/javascript" src="js/backbone.localStorage.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/models/file.js"></script>
	<script type="text/javascript" src="js/models/user.js"></script>
	<script type="text/javascript" src="js/collections/files.js"></script>
	<script type="text/javascript" src="js/collections/members.js"></script>
	<script type="text/javascript" src="js/socketio/main-socket.js"></script>
	<script type="text/javascript" src="js/views/login-view.js"></script>
	<script type="text/javascript" src="js/views/register-view.js"></script>
	<script type="text/javascript" src="js/views/member-view.js"></script>
	<script type="text/javascript" src="js/views/memberlist-view.js"></script>
	<script type="text/javascript" src="js/views/file-view.js"></script>
	<script type="text/javascript" src="js/views/files-view.js"></script>
	<script type="text/javascript" src="js/routers/router.js"></script>
</body>
</html>
